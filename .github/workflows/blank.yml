name: CI

on:
  push:

  workflow_dispatch:


jobs: 
  build:
    runs-on: ubuntu-latest
        
    steps:
      - uses: actions/checkout@v3

      - uses: actions/setup-node@v3
        with:
          node-version: 'v16'
          cache: 'yarn'
          always-auth: true
          registry-url: 'https://npm.pkg.github.com'
          scope: '@akv-demo'
          
      - run: |
          set -x
          yarn 
          node index.js
        env:
          NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
         

     # - name: publish to github
     #   env:
     #     NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN  }}
     #   run: |
     #     cat $NPM_CONFIG_USERCONFIG
     #     cd pkg1
     #     npm publish 
